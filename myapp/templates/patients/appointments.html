<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Appointments</title>
    <link rel="stylesheet" href="{{url_for('static', filename ='css/style.css')}}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <!-- below is a javascript file,helps in interactivity -->
	<!-- jQuery and JS bundle w/ Popper.js -  Interactivity-->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
</head>
<body>
<h3>Appointments</h3>
{%include 'patients/patient_nav.html'%}
{%include 'msg.html'%}
<section class="row">
    <div class="col-md-4 signup-form">
        <h1>Book appointment</h1>
        <form action="/appointments/view" method="post">
            <input type="datetime-local" id="selected_date" required name = "time" >
            <button type="submit" class="cta-btn">BOOK</button>
        </form>

    </div>
    <div class="col-md-8">
        <table class="table ">
            <tr>
                <th>Appointment ID</th>
                <th>patient ID</th>
                <th>Room Number</th>
                <th>Time</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
            {%for row in rows%}
            <tr>
                <td>{{row [0]}}</td>
                <td>{{row [1]}}</td>
                <td>{{row [2]}}</td>
                <td>{{row [3]}}</td>
                <td>{{row [4]}}</td>
                <td>
                    <form action="/appointments/cancel" method="post">
                        <input type="hidden" value="{{row [0]}}" name="id">
                        <button type="submit" class="btn btn-danger">Cancel</button>
                    </form>
                </td>
            </tr>
            {%endfor%}
        </table>
    </div>
</section>

<!--Restrict date selection to today's date and onwards-->
<script>
    // Get the current date and time in ISO format (YYYY-MM-DDTHH:MM)
    const currentDateTime = new Date().toISOString().slice(0, 16);

    // Find the datetime-local input element by its id
    const datetimeInput = document.getElementById('selected_date');

    // Set the minimum attribute to the current date and time
    datetimeInput.min = currentDateTime;

</script>
</body>
</html>